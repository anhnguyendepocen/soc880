<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Data Visualization</title>
  <meta name="description" content="">
  <meta name="author" content="Kieran Healy">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="stylesheet" href="./frameworks/revealjs/css/reveal.min.css">
  <link rel="stylesheet" href="./frameworks/revealjs/css/theme/night.css" id="theme">
  <link rel="stylesheet" href="./highlighters/highlight.js/css/solarized_light.css" id="theme">
  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->  <link rel="stylesheet" href = "assets/css/ribbons.css">

</head>
<body>
  <div class="reveal">
    <div class="slides">
      <section class='' data-state='' id='slide-1'>
  
  <style type='text/css'>
.reveal {
  font-size: 28px;  
}
</style>

<h1>Data Visualization Week 1</h1>

<h3>Kieran Healy, Duke University</h3>

</section>
<section class='' data-state='' id='slide-2'>
  <h2>Outline for Today</h2>
  <ol>
<li>Housekeeping</li>
<li>Motivation and Goals</li>
<li>Up and running with R and RStudio</li>
<li>What we are Good and Bad at Seeing</li>
<li>A First Figure in R</li>
</ol>

</section>
<section class='' data-state='' id='slide-3'>
  <h2>Housekeeping</h2>
  <h3><a href="http://socviz.github.io/soc880/">http://socviz.github.io/soc880/</a></h3>

<ul>
<li>Slides, code, and other material will be available there.</li>
<li>The site is hosted on GitHub.</li>
<li>Take a look at that here: <a href="https://github.com/socviz/soc880">https://github.com/socviz/soc880</a></li>
<li>Soon we&#39;ll get you access for private repositories where you can put your assignments.</li>
</ul>

</section>
<section>
   <section class='' data-state=''>
    <h2>How to Navigate these Slides</h2>
    <ul>
<li>When you view them online, notice the compass in the bottom right corner</li>
<li>You can go left or right, or sometimes down to more detail.</li>
<li>Try hitting the down arrow now.</li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>Hello from down here</h2>

<ul>
<li>Hit the up arrow to return to the main line of slides.</li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section class='' data-state='' id='slide-5'>
  <h2>How to Navigate these Slides</h2>
  <ul>
<li>When you view them online, notice the compass in the bottom right corner</li>
<li>You can go left or right, or sometimes down to more detail.</li>
<li>Try hitting the down arrow (or swiping down) now.</li>
<li>Hit the Escape key to get an overview of all the slides. On a phone
or tablet, pinch to get the slide overview.</li>
<li>You can use the arrow keys (or swipe up and down) in this view as well. </li>
<li>Hit Escape again to return to the slide you were looking at. On a phone or tablet, tap the slide you want.</li>
</ul>

</section>
<section class='' data-state='' id='slide-6'>
  <h2>We want to create pictures of data that people, including ourselves, can look at and learn from</h2>
  <ul>
<li>Slides and other material for this class will be fairly interactive and hands-on. More like working notes than the sort of thing you would present as finished work, or to an audience</li>
<li>Code you can use in R will look like this:</li>
</ul>

<pre><code class="r">## This is a comment
data &lt;- c(1, 1, 4, 1, 1, 4, 1)

data
</code></pre>

<pre><code>## [1] 1 1 4 1 1 4 1
</code></pre>

<ul>
<li>The first box shows something you can type into the R console. The second shows what you&#39;d see as output if you did.</li>
</ul>

</section>
<section>
   <section class='' data-state=''>
    <h2>How to take notes in this class</h2>
    <ul>
<li>Use a text editor. Not MS Word. It&#39;s easiest to work with RStudio. Create a new project there.</li>
<li>We will want to alternate back and forth between bits of code and explanatory notes to ourselves, commentary, or other material. We need a format to do this in that still allows us to work in R easily. </li>
<li>Create an RMarkdown file in the directory. RStudio sets up a quick template for you. Save the file, calling it <code>week-01-notes.Rmd</code>.</li>
<li>You won&#39;t use RMarkdown for everything you do. Very short project might just need a single <code>.r</code> file. Very large projects may need more organization. </li>
<li>But it&#39;s good for taking notes while also working with snippets of code. Note that RStudio has various keyboard and menu shortcuts to help you edit quickly.</li>
<li>RMarkdown documents can have all kinds of options and other paraphernalia added. Never mind about those for now. Just stick with the defaults.</li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>What&#39;s happening behind the scenes</h2>

<p><img src="../assets/wk-01-workflow-wide.png" alt="I promise this is less insane than it appears."></p>

<ul>
<li>RStudio will take care of this for you, so don&#39;t panic. </li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>Why does it need to be so cumbersome?</h2>

<ul>
<li>You may be used to thinking of your final document (e.g. a Word
file, PDF, or presentation slides, or the tables and figures you
make) as what&#39;s &quot;real&quot; about your project.</li>
<li>It&#39;s better to think of the data and code as what&#39;s real, together
with the text you write.</li>
<li>The idea is that all of the finished output---figures, tables,
etc---is, as much as is reasonable, procedurally and reproducibly
generated from your code, data, and text.</li>
<li>Reproducibility is important to the scientific process. But the
reality for most of us is that the person you most want to be able
to reproduce your work is <em>you</em>, six months or a year from now.</li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>This still seems like kind of a pain in the ass</h2>

<ul>
<li>Working in plain text can be annoying.</li>
<li>But we need to write code that R (or Stata) can understand.</li>
<li>And we really do need to have a way to remember what we did.</li>
<li>Plain text files are a robust and easy-to-share format.</li>
<li>So, as much as possible, keep things simple inside your files.</li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='' data-state=''>
    <h2>When working in R ...</h2>
    <ul>
<li>Make sure you know where you are.</li>
</ul>

<pre><code class="r">## Get the working directory
getwd()
</code></pre>

<pre><code>## [1] &quot;/Users/kjhealy/Documents/courses/graduate/soc880/week-01&quot;
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section class='' data-state='' id='slide-9'>
  <h2>When working in R ...</h2>
  <ul>
<li>A little organization can help a lot</li>
</ul>

<p><img src="../assets/wk-01-org-1.png" alt="A simple project"></p>

</section>
<section class='' data-state='' id='slide-10'>
  <h2>When working in R ...</h2>
  <ul>
<li>More complex projects may have a more complex structure</li>
<li>Rstudio can help with project organization as well.</li>
</ul>

<p><img src="../assets/wk-01-org-2.png" alt="A more complex project"></p>

</section>
<section>
   <section class='' data-state=''>
    <h2>When working in R ...</h2>
    <h3>Everything has a <em>name</em></h3>

<ul>
<li>Some names are forbidden. These include words like <code>FALSE</code> and <code>TRUE</code>, logical operators and programming words like <code>Inf</code>, <code>for</code>, <code>else</code>, <code>break</code>, <code>function</code>, and words for special entities like <code>NA</code> and <code>NaN</code>.</li>
<li>Some names you should not use. These include words that are also the names of very widely used objects like <code>q</code> or <code>c</code> or <code>mean</code>, or <code>pi</code>, or <code>range</code>, or <code>var</code>.</li>
<li>All names are case sensitive.</li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>When working in R ...</h2>

<h3>Everything is an <em>object</em></h3>

<ul>
<li>Objects are built in to R, are added via libraries, or are created by the user.</li>
</ul>

<pre><code class="r">## This is a vector of numbers

my_numbers &lt;- c(1, 2, 3, 1, 3, 5, 25)

my_numbers
</code></pre>

<pre><code>## [1]  1  2  3  1  3  5 25
</code></pre>

<pre><code class="r">summary(my_numbers)
</code></pre>

<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   1.000   1.500   3.000   5.714   4.000  25.000
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>When working in R ...</h2>

<h3>Every object has a <em>class</em></h3>

<ul>
<li>Depending on what type of object something is, you can extract bits of information from it.</li>
</ul>

<pre><code class="r">class(my_numbers)
</code></pre>

<pre><code>## [1] &quot;numeric&quot;
</code></pre>

<pre><code class="r">class(summary)
</code></pre>

<pre><code>## [1] &quot;function&quot;
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>When working in R ...</h2>

<h3>Functions take Data (or Functions) as inputs, and produce outputs</h3>

<pre><code class="r">## A Function takes arguments inside parentheses 
my_summary &lt;- summary(my_numbers)

class(my_summary)
</code></pre>

<pre><code>## [1] &quot;summaryDefault&quot; &quot;table&quot;
</code></pre>

<pre><code class="r">my_summary
</code></pre>

<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   1.000   1.500   3.000   5.714   4.000  25.000
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>When working in R ...</h2>

<ul>
<li>For now just remember that you do things in R by creating and manipulating objects, and that you manipulate objects by feeding them to functions and getting output back as a result.</li>
</ul>

<pre><code class="r">my_numbers * 2
</code></pre>

<pre><code>## [1]  2  4  6  2  6 10 50
</code></pre>

<pre><code class="r">table(my_numbers)
</code></pre>

<pre><code>## my_numbers
##  1  2  3  5 25 
##  2  1  2  1  1
</code></pre>

<pre><code class="r">sd(my_numbers)
</code></pre>

<pre><code>## [1] 8.616153
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>When working in R ...</h2>

<h3>If you&#39;re not sure what something is, ask for its class:</h3>

<pre><code class="r">class(my_numbers)
</code></pre>

<pre><code>## [1] &quot;numeric&quot;
</code></pre>

<pre><code class="r">class(my_summary)
</code></pre>

<pre><code>## [1] &quot;summaryDefault&quot; &quot;table&quot;
</code></pre>

<pre><code class="r">class(table)
</code></pre>

<pre><code>## [1] &quot;function&quot;
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>When working in R ...</h2>

<h3>If you&#39;re not sure what something is, ask for its structure</h3>

<pre><code class="r">str(my_numbers)
</code></pre>

<pre><code>##  num [1:7] 1 2 3 1 3 5 25
</code></pre>

<pre><code class="r">str(my_summary)
</code></pre>

<pre><code>## Classes &#39;summaryDefault&#39;, &#39;table&#39;  Named num [1:6] 1 1.5 3 5.71 4 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:6] &quot;Min.&quot; &quot;1st Qu.&quot; &quot;Median&quot; &quot;Mean&quot; ...
</code></pre>

<pre><code class="r">str(summary)
</code></pre>

<pre><code>## function (object, ...)
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section class='' data-state='' id='slide-12'>
  <h2>Before we get lost in the Weeds, let&#39;s look at some pictures</h2>
  <ul>
<li>We will be looking at R objects and functions in more detail later, and writing our own.</li>
</ul>

</section>
<section class='' data-state='' id='slide-13'>
  <h2>What Data Values are Displayed in this Figure?</h2>
  <p><img src="../assets/wk-01-excel-3d-column-chart.png" alt="A 3-D Column Chart created in Excel for Mac"></p>

</section>
<section class='' data-state='' id='slide-14'>
  <h2>The answer may surprise you.</h2>
  <p><img src="../assets/wk-01-excel-3d-column-chart-values.png" alt="Excel 3-D Column Chart with Values shown"></p>

</section>
<section class='' data-state='' id='slide-15'>
  <h2>What about this one?</h2>
  <p><img src="../assets/wk-01-excel-3d-pie-chart.png" alt="A 3-D Pie Chart created in Excel for Mac"></p>

</section>
<section class='' data-state='' id='slide-16'>
  
  <p><img src="../assets/wk-01-excel-3d-pie-chart-values.png" alt="A 3-D Pie Chart created in Excel for Mac"></p>

</section>
<section class='' data-state='' id='slide-17'>
  <h2>What Makes Bad Figures Bad?</h2>
  <ul>
<li>Sometimes, it&#39;s because they mislead or lend themselves to misinterpretation, either accidentally or on purpose. </li>
<li>Sometimes, it&#39;s just aesthetics. The chart is fine but it looks terrible.</li>
<li>Sometimes, the figure is showing you less than it should, or could. </li>
<li>Sometimes, the figure is showing you way more than it should.</li>
<li>As problems can go in both directions (too much; too little) we need more than pure taste to guide us.</li>
</ul>

</section>
<section class='' data-state='' id='slide-18'>
  <h2>Simplify, Simplify</h2>
  <ul>
<li>Tufte emphasizes simplification and maximizing the &quot;data to ink ratio&quot;.</li>
<li>Show the data as much as you can, and avoid &quot;chartjunk&quot; and &quot;ducks&quot;.</li>
</ul>

<p><img src="../assets/wk-01-chartjunk.gif" alt="Chartjunk Gif"></p>

</section>
<section class='' data-state='' id='slide-19'>
  <h2>William Cleveland</h2>
  <p><img src="../assets/wk-01-cleveland-tasks.png" alt="Cleveland&#39;s visual tasks"></p>

</section>
<section class='' data-state='' id='slide-20'>
  <h2>William Cleveland</h2>
  <ul>
<li>It is difficult to compare length judgments without a common baseline.</li>
<li>People misjudge <em>areas</em> easily. Area judgments are less accurate than length judgments or position judgments.</li>
<li>People  misjudge <em>volumes</em> even more. This is one reason 3-D charts are usually terrible.</li>
<li>People misjudge <em>angles</em>, as well. The size of acute angles is underestimated. The size of obtuse angles is overestimated. This is one reason pie charts are terrible.</li>
<li>People find it hard to judge <em>slopes</em> and <em>changes in slope</em>. </li>
<li>Comparisons can&#39;t be made if people can&#39;t see the data points to begin with (e.g. if they overlap too much or are otherwise obscured.)</li>
<li>Colors are good for distinguishing categories, but much less so the values of continuous variables.</li>
</ul>

</section>
<section>
   <section class='' data-state=''>
    <h2>Chartjunk is terrible, but ...</h2>
    <p><img src="../assets/wk-01-stacked-bar.jpeg" alt="Baseline 1"></p>

<p>Ew.</p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>Removing Chartjunk won&#39;t fix Perceptual Problems</h2>

<p><img src="../assets/wk-01-stacked-column.png" alt="Baseline 2"></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>Removing Chartjunk won&#39;t fix Perceptual Problems</h2>

<p><img src="../assets/wk-01-length-baseline.png" alt="Baseline 3"></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>Removing Chartjunk won&#39;t fix Perceptual Problems</h2>

<p><img src="../assets/wk-01-cleveland-pie-bar.png" alt="Cleveland Pie"></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>Removing Chartjunk won&#39;t fix Perceptual Problems</h2>

<ul>
<li>What&#39;s the trend with these two curves?</li>
</ul>

<p><img src="../assets/wk-01-curves-1.png" alt="Cleveland curve 1"></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>Removing Chartjunk won&#39;t fix Perceptual Problems</h2>

<ul>
<li><em>Now</em> what&#39;s the trend?</li>
</ul>

<p><img src="../assets/wk-01-curves-2.png" alt=""></p>

<ul>
<li>We just adjusted the width of the figure, nothing else.</li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='' data-state=''>
    <h2>Let&#39;s get some Data ...</h2>
    <pre><code class="r">## Helper libraries give you new functions to use
library(devtools)
library(ggplot2)

## Put the url in an object
gapminder.url &lt;- &quot;https://raw.githubusercontent.com/socviz/soc880/master/data/gapminder.csv&quot;

## What is it?
class(gapminder.url)
</code></pre>

<pre><code>## [1] &quot;character&quot;
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>Let&#39;s get some Data ...</h2>

<pre><code class="r">## Make a new object
## Notice how we are using more than one function here
data &lt;- read.csv(url(gapminder.url))

## What&#39;s the class?
class(data)
</code></pre>

<pre><code>## [1] &quot;data.frame&quot;
</code></pre>

<pre><code class="r">## What&#39;s inside?
str(data)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    1704 obs. of  6 variables:
##  $ country  : Factor w/ 142 levels &quot;Afghanistan&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
##  $ continent: Factor w/ 5 levels &quot;Africa&quot;,&quot;Americas&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ year     : int  1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
##  $ lifeExp  : num  43.1 45.7 48.3 51.4 54.5 ...
##  $ pop      : num  9279525 10270856 11000948 12760499 14760787 ...
##  $ gdpPercap: num  2449 3014 2551 3247 4183 ...
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>Let&#39;s get some Data ...</h2>

<pre><code class="r">## Get the dimensions of the data frame
dim(data)
</code></pre>

<pre><code>## [1] 1704    6
</code></pre>

<pre><code class="r">## Another way to look at a data frame
head(data)
</code></pre>

<pre><code>##   country continent year lifeExp      pop gdpPercap
## 1 Algeria    Africa 1952  43.077  9279525  2449.008
## 2 Algeria    Africa 1957  45.685 10270856  3013.976
## 3 Algeria    Africa 1962  48.303 11000948  2550.817
## 4 Algeria    Africa 1967  51.407 12760499  3246.992
## 5 Algeria    Africa 1972  54.518 14760787  4182.664
## 6 Algeria    Africa 1977  58.014 17152804  4910.417
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>... and get ready to plot it</h2>

<pre><code class="r">## Make an object containing the plot
## try str(p) if you like. Objects can be complex!

p &lt;- ggplot(data,
            aes(x = gdpPercap,
                y = lifeExp))
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <pre><code class="r">## Take our data and make a scatter plot
p + geom_point()
</code></pre>

<p><img src="assets/fig/FirstPlot-3-1.png" alt="plot of chunk FirstPlot-3"> </p>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section class='' data-state='' id='slide-23'>
  <h2>Homework</h2>
  <ol>
<li>Create an RMarkdown file for your work if you haven&#39;t already.</li>
<li>Look again at the data.</li>
<li>Put <code>lifeExp</code> on the x-axis and <code>gdpPercap</code> on the y-axis.</li>
<li>Plot <code>pop</code> on the x-axis and gdpPercap on the y-axis.</li>
<li>Plot <code>year</code> on the x-axis and any continuous variable on the y-axis. </li>
</ol>

<h2></h2>

</section>
    </div>
  </div>
</body>
  <script src="./frameworks/revealjs/lib/js/head.min.js"></script>
  <script src="./frameworks/revealjs/js/reveal.min.js"></script>
  <script>
  // Full list of configuration options available here:
  // https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: true,
    theme: Reveal.getQueryHash().theme || 'night', 
    transition: Reveal.getQueryHash().transition || 'fade', 
    dependencies: [
    // Cross-browser shim that fully implements classList -
    // https://github.com/eligrey/classList.js/
      { src: './frameworks/revealjs/lib/js/classList.js', condition: function() { return !document.body.classList;}},
      // Zoom in and out with Alt+click
      { src: './frameworks/revealjs/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
      // Speaker notes
      { src: './frameworks/revealjs/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
      // Remote control your reveal.js presentation using a touch device
      //{ src: './frameworks/revealjs/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
      ]
  });
  </script>  <!-- LOAD HIGHLIGHTER JS FILES -->
<script src="./highlighters/highlight.js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- DONE LOADING HIGHLIGHTER JS FILES -->
 

</html>